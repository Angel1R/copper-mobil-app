<ion-content>

  <ion-button fill="clear" (click)="volverAHome()">
    <ion-icon name="arrow-back-outline"></ion-icon>
    Volver
  </ion-button>

  <ion-refresher slot="fixed" (ionRefresh)="actualizar($event)">
    <ion-refresher-content pullingIcon="chevron-down" refreshingSpinner="circles" pullingText="Desliza para actualizar" refreshingText="Actualizando...">
    </ion-refresher-content>
  </ion-refresher>

  <ion-searchbar
    [(ngModel)]="busqueda"
    placeholder="Buscar por nombre o direcci√≥n"
    debounce="300"
    showCancelButton="focus">
  </ion-searchbar>

  <div style="padding: 0 16px;">
    <ion-item>
      <ion-label>Estado</ion-label>
      <ion-select [(ngModel)]="filtroEstado" interface="popover">
        <ion-select-option value="todos">Todos</ion-select-option>
        <ion-select-option value="pendiente">Pendientes</ion-select-option>
        <ion-select-option value="procesado">Procesados</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item>
      <ion-label>Orden</ion-label>
      <ion-select [(ngModel)]="ordenChips" interface="popover">
        <ion-select-option value="recientes">M√°s recientes</ion-select-option>
        <ion-select-option value="antiguos">M√°s antiguos</ion-select-option>
      </ion-select>
    </ion-item>
  </div>

  <ion-card *ngIf="chipsFiltrados.length > 0">
    <ion-card-header>
      <ion-card-title>üßæ Chips solicitados</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let c of chipsFiltrados">
          <ion-label>
            <h4>{{ c.nombre }} ‚Äî {{ c.tipo === 'nueva' ? 'L√≠nea nueva' : 'Portabilidad' }}</h4>
            <p style="font-size: 13px; color: gray;">
              Estado:
              <strong [style.color]="c.status === 'procesado' ? 'green' : 'orange'">
                {{ c.status === 'procesado' ? '‚úÖ Procesado' : '‚è≥ Pendiente' }}
              </strong>
              |
              {{ c.createdAt | date:'medium' }}
            </p>
            <p style="font-size: 13px;">Direcci√≥n: {{ c.direccion }}</p>
            <p *ngIf="c.telefono">Tel√©fono: {{ c.telefono }}</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <ion-card *ngIf="chipsFiltrados.length === 0">
    <ion-card-content style="text-align: center; color: gray;">
      No hay chips que coincidan con ese filtro o b√∫squeda.
    </ion-card-content>
  </ion-card>

</ion-content>
